<!DOCTYPE html>
{% load staticfiles %}
<html>
<head>
    <meta charset="utf-8">
    <link href="{% static 'css/reglogin.css' %}" rel='stylesheet' type='text/css'/>
    <script src="https://cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="main">
    <div class="header">
        <h1>用户登录</h1>
    </div>
    <p></p>
    <form method="post" action="{% url 'users:user_login' %}">
        {% csrf_token %}
        <ul class="left-form">
            <h2>登录:</h2>
            <li>
                <input type="text" placeholder="Username" name="username"/>
                <a href="#" class="icon ticker"> </a>
                <div class="clear"></div>
            </li>
            <li>
                <input type="password" placeholder="password" name="password"/>
                <a href="#" class="icon into"> </a>
                <div class="clear"></div>
            </li>
            <li>
                <input type="text" placeholder="验证码" name="checkcode" style="width:100px"/>
                <img src="{% url 'users:get_code' %}" id="checkcode">
                <a href="#" class="icon into"> </a>
                <div class="clear"></div>
            </li>
            <input type="submit" value="登录">
            <div class="clear"></div>
        </ul>
        <div class="clear"></div>

    </form>
    <div style="color: red">
        {{ msg }}
        {% for k,err in user_login_form.errors.items %}
            {{ err }}
        {% endfor %}
    </div>
</div>
<script>

    $('#checkcode').click(function(){
        {#alert('别点我！')#}
        console.log('别点我！')
        $(this).attr('src','{% url 'users:get_code' %}?ran='+Math.random())
    })

</script>
</body>
</html>